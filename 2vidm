function getVidmNames(jsonInput) {
    // Function to extract vidm names recursively
    function extractVidmNames(obj, parentKey) {
        if (typeof obj !== 'object' || obj === null) {
            return [];
        }
        
        let vidmNames = [];
        
        if (Array.isArray(obj)) {
            for (let item of obj) {
                vidmNames = vidmNames.concat(extractVidmNames(item, parentKey));
            }
        } else {
            for (let key in obj) {
                if (key === 'mgmt' && Array.isArray(obj[key])) {
                    let count = 0;
                    for (let item of obj[key]) {
                        if (item.type === 'vidm') {
                            vidmNames.push({ name: item.vmname, parent: parentKey });
                            count++;
                        }
                    }
                    if (count === 2) {
                        reportParents.add(parentKey);
                    }
                } else {
                    vidmNames = vidmNames.concat(extractVidmNames(obj[key], key));
                }
            }
        }
        return vidmNames;
    }

    let reportParents = new Set();
    let vidmNamesList = extractVidmNames(jsonInput, '');
    
    return {
        vidmNames: vidmNamesList.map(item => item.name),
        parentsWithTwoVidm: Array.from(reportParents)
    };
}

// Example JSON input
let jsonString = '{"xyz":{"mgmt":[{"type":"vidm","vmname":"abc"}]},"abc":{"mgmt":[{"type":"vidm","vmname":"123"},{"type":"vidm","vmname":"456"}]}}';
let jsonObject = JSON.parse(jsonString);

let result = getVidmNames(jsonObject);
System.log("Vidm Names: " + result.vidmNames.join(', '));
System.log("Parents with 2 vidm: " + result.parentsWithTwoVidm.join(', '));
